# Работа с данными
#### Чтобы не копировать части разметки компонентов можно использовать данные в формате `JSON`<br> и использовать циклы для добавления элементов.

**Основная папка:** [`src/data/`](/src/data)

Внутри есть [`template`](/src/data/template) с файлами:
* [`common.json`](/src/data/template/common.json)
    * Файл с общими данными. Например ссылками и логотипами Лафхакера и партнера.
    * Зачастую эти ссылки добавляются в шапке и футере страницы<br>
        Чтобы не прописывать одни и те же данные вручную - этот файл импортируется в файл `header.json` и в компонент [`Footer`](/src/components/Footer.vue).
* [`header.json`](/src/data/template/header.json)

## Организация данных
В папку [`src/data/`](/src/data) добавляем файл с названием страницы.
**Например:** [`indexPage.json`](/src/data/indexPage.json)

#### Примечание:
```markdown
Не рекомендуется передавать данные напрямую в компоненты, лучше описывать их внутри файла страницы.
Это позволит легко переиспользовать компоненты на других страницах с другими данными(или просто другим блоком на этой же).

`Исключения`: полностью самостоятельные компоненты, данные которых не зависят от страницы. Например шапка и футер.
```

#### Следуя этой логике:
Внутри файла расписываем структуру данных.<br>

**Для удобства в сборщик встроен `сплиттер` для `json`-файлов.**

Можно описывать каждый блок друг за другом в одном файле<br> 
**или**<br>
разделить данные, например, по блокам и подключать их в основной файл как в примере ниже в поле `example`.

```
Контента на странице может быть много.
Этот способ позволит облегчить заполнение и изменение данных, чтобы не искать нужные строки в одном огромном файле.
```

**Пример:**<br>
`JSON`:
```json
{
  "main": {
    "title": "Тут будет заголовок H1",
    "subtitle": "тут будет текст после заголовка"
  },
  "banner": {
    "image": "banner.jpg",
    "title": "Заголовок баннера",
    "text": "Текст баннера"
  },
  "content": [
    {
      "title": "title",
      "text": "text",
      "image": "image.jpg"
    },
    {
      "title": "title 2",
      "subtitle": "subtitle",
      "text": "text 2"
    }
  ],
  "example": "file::/parts/indexPage/example.json"
}
```


#### Если нужно передать несколько абзацев текста, можно добавить их двумя способами:<br>
**Первый:**<br>
`JSON`:
```json
{
  "text": "<p>Абзац текста 1</p> <p>Абзац текста 2</p>"
}
```

`Vue`:
```vue
  <div class="example__text" v-html="info.text"></div>
```


**Второй:**<br>
`JSON`:
```json
{
  "text": [
    "Абзац текста 1",
    "Абзац текста с <a href=\"https://linkToSomewhere.com\" target=\"_blank\">ссылкой</a>",
    "Абзац текста с <a href='https://linkToSomewhere.com' target='_blank'>ссылкой</a>"
  ]
}
```
Выше приведены примеры добавления ссылок внутри текста (с экранированием двойных кавычек и упрощенный).

`Vue`:<br>
В шаблоне просто пройдем циклом по массиву и добавим элементы `<p>`.
```vue
  <div class="example__text">
    <p v-for="text, index in info.text" :key="`text--${index}`" v-html="text"></p>
  </div>
```

<br>
<br>

## Подключаем JSON в компонент
Для добавления данных реализована функция `loadJSON()`, которая загружает данные и "замораживает" объект (отключает реактивность).<br>

**Пример использования:**<br>
* Загружаем и храним данные в компоненте страницы
* В дочерних компонентах создаем [`props`](https://ru.vuejs.org/v2/guide/components-props.html)
* Передаём в компонент нужную часть данных

[`Index.vue`](/src/pages/Index.vue):
```vue
<template lang="pug">
  // передаем полученный объект в компонент во входной параметр info
  Example(v-if="info.example" :info="info.example")
</template>

<script>
import Example from '@/components/Example/Example.vue';

export default {
  name: 'index',
  components: {
    Example,
  },
  data: (context) => ({
    // загружаем данные с помощью утилиты
    // путь до файла указывается относительно папки src/data/
    info: context.$utils.loadJSON('indexPage.json'),
  }),
};
</script>
```

#### Так же посмотрите компонент [`Example`](/src/components/Example) для наглядности работы с данными.
